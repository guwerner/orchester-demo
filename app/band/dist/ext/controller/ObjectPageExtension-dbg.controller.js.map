{"version":3,"file":"ObjectPageExtension-dbg.controller.js","names":["ObjectPageExtension","ControllerExtension","extend","overrides","onInit","editFlow","onBeforeSave","context","this","base","getExtensionAPI","getBindingContext","getProperty","Promise","resolve","reject","openDialog","undefined","async","_openDialog","approveDialog","loadFragment","id","initialBindingContext","name","getBeginButton","attachPress","close","destroy","getEndButton","attachAfterClose","open","error"],"sources":["ObjectPageExtension.controller.ts"],"sourcesContent":["import ControllerExtension from \"sap/ui/core/mvc/ControllerExtension\";\r\nimport ExtensionAPI from \"sap/fe/templates/ObjectPage/ExtensionAPI\";\r\nimport Context from \"sap/ui/model/odata/v4/Context\";\r\nimport Dialog from \"sap/m/Dialog\";\r\n\r\n/**\r\n * @namespace ext.controller\r\n * @controller\r\n */\r\nexport default class ObjectPageExtension extends ControllerExtension<ExtensionAPI> {\r\n\tasync openDialog(resolve: (value: PromiseLike<null> | null) => void, reject: (reason?: any) => void, context: Context) {\r\n\t\t//try catch ensures errors in floating promises are handled properly\r\n\t\ttry {\r\n\t\t\tlet approveDialog = (await this.base.getExtensionAPI().loadFragment({\r\n\t\t\t\tid: \"myFragment\",\r\n\t\t\t\tinitialBindingContext: context,\r\n\t\t\t\tname: \"band.ext.fragment.Trees4Tickets\"\r\n\t\t\t})) as Dialog;\r\n\t\t\t//Dialog Save button\r\n\t\t\tapproveDialog.getBeginButton().attachPress(function () {\r\n\t\t\t\tapproveDialog.close().destroy();\r\n\t\t\t\tresolve(null);\r\n\t\t\t});\r\n\t\t\t//Dialog Cancel button\r\n\t\t\tapproveDialog.getEndButton().attachPress(function () {\r\n\t\t\t\tapproveDialog.close().destroy();\r\n\t\t\t\treject(null);\r\n\t\t\t});\r\n\t\t\t//consider dialog closing with ESC\r\n\t\t\tapproveDialog.attachAfterClose(function () {\r\n\t\t\t\tapproveDialog.destroy();\r\n\t\t\t\treject(null);\r\n\t\t\t});\r\n\t\t\tapproveDialog.open();\r\n\t\t} catch (error) {\r\n\t\t\treject(null);\r\n\t\t}\r\n\t}\r\n\tstatic overrides = {\r\n\r\n\t\t/**\r\n\t\t * Called when a controller is instantiated and its View controls (if available) are already created.\r\n\t\t * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.\r\n\t\t * @memberOf sap.fe.cap.travel.ext.controller.ObjectPageExtension\r\n\t\t */\r\n\t\tonInit(this: ObjectPageExtension) {\r\n\t\t\t// you can access the Fiori elements extensionAPI via this.base.getExtensionAPI\r\n\t\t\t//const model = this.base.getExtensionAPI().getModel();\r\n\t\t},\r\n\t\teditFlow: {\r\n\t\t\tonBeforeSave(this: ObjectPageExtension) {\r\n\t\t\t\tconst context = this.base\r\n\t\t\t\t\t.getExtensionAPI()\r\n\t\t\t\t\t.getBindingContext() as Context;\r\n\t\t\t\tif (!context.getProperty(\"GoGreen\")) {\r\n\t\t\t\t\t//void intentionally discards returned floating promise\r\n\t\t\t\t\treturn new Promise<null>((resolve, reject) => { void this.openDialog(resolve, reject, context); });\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}"],"mappings":"+EAKA,MAIqBA,EAA4BC,EAAmBC,OAAA,sCA6B5DC,UAAY,CAOlBC,SAEC,EAEDC,SAAU,CACTC,eACC,MAAMC,EAAUC,KAAKC,KACnBC,kBACAC,oBACF,IAAKJ,EAAQK,YAAY,WAAY,CAEpC,OAAO,IAAIC,QAAc,CAACC,EAASC,UAAkBP,KAAKQ,WAAWF,EAASC,EAAQR,IACvF,CACA,OAAOU,SACR,IAjDID,WAAUE,eAAAC,EAACL,EAAoDC,EAAgCR,GAEpG,IACC,IAAIa,QAAuBZ,KAAKC,KAAKC,kBAAkBW,aAAa,CACnEC,GAAI,aACJC,sBAAuBhB,EACvBiB,KAAM,oCAGPJ,EAAcK,iBAAiBC,YAAY,WAC1CN,EAAcO,QAAQC,UACtBd,EAAQ,KACT,GAEAM,EAAcS,eAAeH,YAAY,WACxCN,EAAcO,QAAQC,UACtBb,EAAO,KACR,GAEAK,EAAcU,iBAAiB,WAC9BV,EAAcQ,UACdb,EAAO,KACR,GACAK,EAAcW,MACf,CAAE,MAAOC,GACRjB,EAAO,KACR,CACD,IAAC,OA5BmBf,CAAmB","ignoreList":[]}